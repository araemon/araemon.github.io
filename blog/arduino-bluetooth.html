<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>
ğŸ’»Arduinoã§æ¸©åº¦ãƒ­ã‚¬ãƒ¼ã‚’ä½œã‚‹ã¾ã§</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" type="text/css" href="/css/icon.css"  />
<link rel="stylesheet" type="text/css" href="/css/main.css?1544556022"  />
<link href="https://fonts.googleapis.com/css?family=Corben:700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c:900" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" >
<style>


</style>
</head>
<body>

        <div id="container">
        <div id="header" class="blog">
        <div class="layerTransparent">
                <div class="container">
                <ul class="nav">
<li><a href="/blog/">Blog</a></li>
<li><a href="/kamityping/">KamiTyping</a></li>
<li><a href="/chazuke/">Chazuke</a></li>
<li><a href="/harmonize/">Harmonize</a></li>
<li><a href="/apps/">Other Apps</a></li>
<li><a href="mailto:i.officearai@gmail.com">Contact</a></li>
</ul>
<div class="copyright">Copyright Â© Toshihiko Arai</div>
                </div>
</div>
        </div>

<div id="contents">
<article>
    <div class="tag">
    <a href="/blog/" class="tagHighlight">Blog (è¨˜äº‹ä¸€è¦§)</a>
    </div>
<h1>
ğŸ’»Arduinoã§æ¸©åº¦ãƒ­ã‚¬ãƒ¼ã‚’ä½œã‚‹ã¾ã§</h1>
<div class="time"><time pubdate="" datetime="2018-11-19">
2018-11-19</time></div>

        <ul class="shareList">
        <li class="shareList__item"><a class="shareList__link icon-twitter" href="https://twitter.com/intent/tweet?url=http://192.168.100.101/blog/arduino-bluetooth.html&text=%F0%9F%92%BBArduino%E3%81%A7%E6%B8%A9%E5%BA%A6%E3%83%AD%E3%82%AC%E3%83%BC%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%BE%E3%81%A7" target="_blank" title="Twitter"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="Facebook"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-google-plus" href="https://plus.google.com/share?url=http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="Google+"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-hatebu" href="http://b.hatena.ne.jp/entry/http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-pocket" href="http://getpocket.com/edit?url=http://192.168.100.101/blog/arduino-bluetooth.html&title=%F0%9F%92%BBArduino%E3%81%A7%E6%B8%A9%E5%BA%A6%E3%83%AD%E3%82%AC%E3%83%BC%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%BE%E3%81%A7" target="_blank" title="Pocket"></a></li>
        </ul>
<p>
<ul id="toc"><li><a href="#1">Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç§‹è‘‰åŸã¾ã§è²·ã„ã«è¡Œã (2018/11/19)</a></li><li><a href="#2">Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’iPhoneã§å—ä¿¡ã™ã‚‹ (2018/11/20)</a></li><li><a href="#3">iOSã¨Arudinoã®Bluetoothé€šä¿¡ (2018/11/21)</a></li><li><a href="#4">ESP-WROOM-02ã§WiFié€šä¿¡ã™ã‚‹ã¾ã§ã€ãã®1 (2018-11-23)</a></li><li><a href="#5">ESP-WROOM-02ã§WiFié€šä¿¡ã™ã‚‹ã¾ã§ã€ãã®2 (2018-11-24)</a></li><li><a href="#6">ã‚„ã£ã±ã‚ŠBluetoothé€šä¿¡ã«ã‚‚ã©ã™ã€ãã®1 (2018-11-24)</a></li><li><a href="#7">æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼DHT11ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹ (2018-11-24)</a></li><li><a href="#8">ESP-WROOM-02ã§SSLã§HTTPSãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ã¿ã‚‹ (2018/11/26)</a></li></li></ul>
<h2 id="1">Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç§‹è‘‰åŸã¾ã§è²·ã„ã«è¡Œã (2018/11/19)</h2><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181119/20181119170038.jpg" class="default" /><br><br>ã»ã¨ã‚“ã©æ‰‹ã‚’ã¤ã‘ãšã«çœ ã£ã¦ã„ãŸã€Arduino Unoã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚­ãƒƒãƒˆã€‚<br>ã‚¢ãƒ—ãƒªé–‹ç™ºã®æ¯æŠœãã«ã€æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼ã§éŠã‚“ã§ã¿ã‚‹ã€‚<br><br>å…ˆæ—¥ã‚­ãƒ£ãƒ³ãƒ—ã§ã€å¯ã‚‹ã¨ãã®å¯’ã•ã«æ­»ã¬æ€ã„ã‚’ã—ãŸã®ã§ã€ãƒ†ãƒ³ãƒˆå†…ã¨ãƒ†ãƒ³ãƒˆå¤–ã®æ¸©åº¦å¤‰åŒ–çš„ãªã‚‚ã®ã‚’ãƒ­ã‚°ã‚Œã‚Œã°ã€ãªã©ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã‚ã‚‹ã€‚<br>Arduinoã«ã¯ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒãªã„ã®ã§ï¼ˆã§ããªã„ã“ã¨ã¯ãªã„ã®ã ãŒï¼‰ã€æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ãƒ¼ã‚’ã‚¹ãƒãƒ›ã«é£›ã°ã—ã¦ã‚¹ãƒãƒ›ã®unixtimeã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚<br>é€šä¿¡ã¯ã€Wifiã€Bluetoothã€ã¯ãŸã¾ãŸãƒ©ã‚¤ãƒ³å…¥åŠ›ã‚’ä½¿ã£ãŸéŸ³å£°ãƒ‡ãƒ¼ã‚¿ã§ã®ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ãªã©ã‚’è€ƒãˆãŸãŒï¼ˆFMå¤‰èª¿çš„ãªï¼‰ã€æ±ç”¨æ€§ã‚’è€ƒãˆã‚‹ã¨ç´ ç›´ã«Bluetoothã‚’ä½¿ã£ãŸæ–¹ãŒè‰¯ã•ãã†ã§ã‚ã‚‹ã€‚<br><br>ã¨ã“ã‚ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ã‚ˆã†ãªä¸å¥åº·ã§å­¤ç‹¬ãªä½œæ¥­ã«ã¯ã€é©åº¦ãªé‹å‹•ãŒå¿…è¦ã ã€‚<br>ãã‚“ãªå£å®Ÿã‚’ã‚¤ãƒã‚¤ãƒã¤ã‘ã€Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è²·ã„ã«ç§‹è‘‰åŸã¾ã§æ­©ãã“ã¨ã«ã—ãŸã€‚<br>èµ¤ç¾½ã‹ã‚‰ç§‹è‘‰åŸã¾ã§ã¯äºŒæ™‚é–“ç¨‹åº¦ã€æ„å¤–ã¨è¿‘ã„ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181119/20181119165002.jpg" width="300" /><br><br>GoogleMapã®ãƒãƒ¼ãƒˆã¯ï¼’å›ã ã‘ã€ã»ã¼ã‚«ãƒ³ã§æ­©ã„ãŸã€‚<br>ç”°ç«¯ã‚ãŸã‚Šã®åœŸåœ°å‹˜ãŒãªã„ãŸã‚ã€ç„¦ã‚ŠãŒå½¢è·¡ã«å‡ºã¦ã„ã¦é¢ç™½ã„ã€‚<br>ä»Šåº¦è¡Œãã¨ã—ãŸã‚‰æ±å¤§çµŒç”±ã¾ãŸã¯ä¸Šé‡çµŒç”±ãŒé¢ç™½ãã†ã ãªã€‚<br>ç§‹æœˆé›»å­ã€åƒçŸ³é›»å•†ã¨å›ã£ãŸã€‚åƒçŸ³é›»å•†ã§å°ä¸€æ™‚é–“ã€æ‚©ã‚€ã€‚<br>çµå±€ã“ã®Bluefruit LE UART Friendã‚’2100å††ã§è³¼å…¥ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181119/20181119170040.jpg" width="300" /><br><br>ã‚°ã‚°ã£ã¦ã¿ã‚‹ã¨è‹±èªã®ã¿ã®æƒ…å ±ã—ã‹ãªã„ã®ã§è¾›ã„ãŒã€ã¾ããªã‚“ã¨ã‹ãªã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚<br>ä»˜è¿‘ã®èŒãˆèŒãˆã‚­ãƒ¥ãƒ³ã«ã¯ã‚ãˆã¦ç›®ã‚‚ãã‚Œã¦ã‚„ã‚‰ãšã€å®‰å®šã®ã‚±ãƒãƒ–ã‚’é£Ÿã¹ã€ç¡¬æ´¾ã‚’æ°—å–ã‚Šãããã•ã¨å¸°é€”ã«ã¤ãã€‚<br><br><br><br><h2 id="2">Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’iPhoneã§å—ä¿¡ã™ã‚‹ (2018/11/20)</h2>ã¾ãšã¯ã€Bluefruitã®åŠç”°ä»˜ã‘ã€‚<br>ãƒ”ãƒ³ã‚’æ•°ã‚«æ‰€ã‚„ã‚‹ã ã‘ãªã®ã§ã€ç‰©è¶³ã‚Šãªã„åŠç”°ä»˜ã‘ä½œæ¥­ã ã€‚<br><br>ãƒˆãƒ©ã‚¤ã‚¢ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã§ã‚„ã£ã¦ã„ãã†ã¡ã«ã€é…ç·šã¯ã“ã†ãªã£ãŸã€‚<br><br>| Bluefruit | Arduino    |<br>| --------- | ---------- |<br>| DFU       | æœªæ¥ç¶š     |<br>| GND       | GND        |<br>| RTS       | æœªæ¥ç¶š     |<br>| VIN       | 5V         |<br>| RXI       | DIGITAL 9  |<br>| TXO       | DIGITAL 10 |<br>| CTS       | DIGITAL 11 |<br>| MOD       | æœªæ¥ç¶š     |<br><br>ã¾ãŸã€ã‚¹ã‚¤ãƒƒãƒã¯UARTå´ã«ã—ã¦ãŠãã€‚<br><br>ã‚¹ãƒãƒ›ã‹ã‚‰Bluefruitã«æ¥ç¶šã™ã‚‹å°‚ç”¨ã®ã‚¢ãƒ—ãƒªãŒã‚ã‚‹ã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚<br><a href="https://itunes.apple.com/jp/app/adafruit-bluefruit-le-connect/id830125974?mt=8&amp;uo=4">https://itunes.apple.com/jp/app/adafruit-bluefruit-le-connect/id830125974?mt=8&amp;uo=4</a><br><a href="https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect">https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect</a><br><br>Arduinoã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãè¾¼ã¾ãªãã¦ã‚‚é›»æºã‚’å…¥ã‚Œã‚Œã°ã€Bluefruitã¨ã¯æ¥ç¶šã§ãã‚‹ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181120/20181120101723.jpg" width="300" /><br><br>ä»Šåº¦ã¯Arduinoã®IDEå´ã®è¨­å®šã‚’ã—ã¦ã„ãã€‚<br><br>Bluefruit LE UART Friendã®æƒ…å ±ã¯ã“ã¡ã‚‰ã€‚<br><a href="https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/introduction">https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/introduction</a><br><br>è‹±èªã®æƒ…å ±ã§ãã¤ã„ãŒã€ãªã‚“ã¨ã‹ã‚„ã£ã¦ã„ãã€‚<br><br>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆAdafruit_BluefruitLE_nRF51ï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚<br><a href="https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/software">https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/software</a><br><br>è§£å‡ã—ãŸã‚‰ãƒ•ã‚©ãƒ«ãƒ€åã‚’Adafruit_BluefruitLE_nRF51ã«ã—ã¦Arduinoã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ•ã‚©ãƒ«ãƒ€ã«å–ã‚Šå…¥ã‚Œã‚‹ã€‚<br>å ´æ‰€ã¯Documents -> Arduino -> librariesã«ãªã£ã¦ã„ã‚‹ã¨æ€ã†ã€‚<br>ã“ã‚Œã§Arduino IDEã®ã‚¹ã‚±ãƒƒãƒä¾‹ã®ä¸­ã«Adafruit_BluefruitLE_nRF51ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒå…¥ã£ãŸã€‚<br><br>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å…ƒã«æ”¹é€ ã—ã¦ã„ãã€‚<br>ã„ã‚‰ãªãã†ãªã‚‚ã®ã¯å‰Šã£ã¦è¦‹ã‚„ã™ãã™ã‚‹ã¨ä»•çµ„ã¿ãŒåˆ†ã‹ã£ã¦ãã‚‹ã€‚<br>ã“ã¡ã‚‰ã¯ã€Œdebugã€ã¨ã„ã†æ–‡å­—ã‚’1ç§’é–“ã«ä¸€å›ã€ã‚¢ãƒ—ãƒªã¸é€ä¿¡ã™ã‚‹ã ã‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã ã€‚<br><br><pre><br>#include <Arduino.h><br>#include <SPI.h><br>#include "Adafruit_BLE.h"<br>#include "Adafruit_BluefruitLE_SPI.h"<br>#include "Adafruit_BluefruitLE_UART.h"<br><br><br>#if SOFTWARE_SERIAL_AVAILABLE<br>  #include <SoftwareSerial.h><br>#endif<br><br>// Arduino UNOã®å ´åˆã“ã®è¨­å®šã§ã†ã¾ãã„ã£ãŸ<br>//<br>#define BLUEFRUIT_SWUART_RXD_PIN       9    // Required for software serial!<br>#define BLUEFRUIT_SWUART_TXD_PIN       10   // Required for software serial!<br>#define BLUEFRUIT_UART_CTS_PIN         11   // Required for software serial!<br>#define BLUEFRUIT_UART_RTS_PIN         -1    // Optional, set to -1 if unused<br>#define BLUEFRUIT_UART_MODE_PIN        -1    // Set to -1 if unused<br>#define VERBOSE_MODE                   true  // If set to 'true' enables debug output<br><br>SoftwareSerial bluefruitSS = SoftwareSerial(BLUEFRUIT_SWUART_TXD_PIN, BLUEFRUIT_SWUART_RXD_PIN);<br><br>Adafruit_BluefruitLE_UART ble(bluefruitSS, BLUEFRUIT_UART_MODE_PIN,<br>                      BLUEFRUIT_UART_CTS_PIN, BLUEFRUIT_UART_RTS_PIN);<br><br><br>void error(const __FlashStringHelper*err) {<br>  Serial.println(err);<br>  while (1);<br>}<br><br><br>void setup(void)<br>{<br>  while (!Serial); // required for Flora & Micro<br>  delay(500);<br><br><br>  Serial.begin(9600);<br><br>  if ( !ble.begin(VERBOSE_MODE) )<br>  {<br>    error(F("Couldn't find Bluefruit, make sure it's in CoMmanD mode & check wiring?"));<br>  }<br>  Serial.println( F("OK!") );<br><br>}<br><br>void loop(void)<br>{<br>  delay(1000);<br>  ble.write("debug\n");<br>}<br></pre><br><br>çµæœã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚<br><br><iframe width="560" height="315" frameborder="0" allowfullscreen="" src="//www.youtube.com/embed/ji9QMKKZXmk"></iframe><br><a href="https://youtube.com/watch?v=ji9QMKKZXmk">Success! Connecting Arduino and smartphone with Bluetooth.</a><br><br>ã¿ã”ã¨ã€æ¥ç¶šæˆåŠŸï¼âš¡ï¸<br><br><br><h2 id="3">iOSã¨Arudinoã®Bluetoothé€šä¿¡ (2018/11/21)</h2>ä»Šåº¦ã¯iOSã‹ã‚‰Arduinoã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ã’ã¦ã€ã•ã‚‰ã«ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’Arduinoã‹ã‚‰å—ã‘å–ã£ã¦ã¿ã‚‹ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181121/20181121164901.jpg" class="default" /><br><br>Swiftã§ã“ã‚“ãªæ„Ÿã˜ã®iOSã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚<br>ã“ã‚ŒãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Œã°Bluetoothã§Arduinoã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã ã‚Šã€Arduinoã‚’æ“ä½œã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181121/20181121165524.jpg" width="300" /><br><br><br><pre><br>import UIKit<br>import CoreBluetooth<br><br>class ViewController: UIViewController {<br><br>    @IBOutlet weak var reciveTextView: UITextView!<br>    <br>    <br>    let kUARTServiceUUID = "6E400001-B5A3-F393-E0A9-E50E24DCCA9E" // UARTã‚µãƒ¼ãƒ“ã‚¹<br>    let kTXCharacteristicUUID = "6E400002-B5A3-F393-E0A9-E50E24DCCA9E" // ãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«ã¸é€ä¿¡ç”¨<br>    let kRXCharacteristicUUID = "6E400003-B5A3-F393-E0A9-E50E24DCCA9E" // ãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«ã‹ã‚‰ã®å—ä¿¡ç”¨<br><br>    var centralManager: CBCentralManager!<br>    var peripheral: CBPeripheral!<br>    var serviceUUID : CBUUID!<br>    var kTXCBCharacteristic: CBCharacteristic!<br>    var kRXCBCharacteristic: CBCharacteristic!<br>//    var charcteristicUUID: CBUUID!<br>    var charcteristicUUIDs: [CBUUID]!<br>    <br>    @IBOutlet weak var sendMessageTextField: UITextField!<br>    @IBAction func clickedConnectButton(_ sender: Any) {<br>        setup()<br>    }<br>    <br><br>    @IBAction func clickedWriteButton(_ sender: Any) {<br>        let peripheral = self.peripheral<br>        if(peripheral == nil) { return }<br>        <br>        let writeData = sendMessageTextField.text!.data(using: .utf8)!<br>        peripheral!.writeValue(writeData, for: kTXCBCharacteristic, type: .withResponse)<br>        sendMessageTextField.text = ""<br>    }<br>    <br><br>    <br>    override func viewDidLoad() {<br>        super.viewDidLoad()<br>        <br>    }<br><br>    /// ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€UUIDã®åˆæœŸåŒ–<br>    private func setup() {<br>        centralManager = CBCentralManager()<br>        centralManager.delegate = self as CBCentralManagerDelegate<br>//        centralManager.scanForPeripherals(withServices: nil, options: nil)<br><br>        serviceUUID = CBUUID(string: kUARTServiceUUID)<br>        charcteristicUUIDs = [CBUUID(string: kTXCharacteristicUUID), CBUUID(string: kRXCharacteristicUUID)]<br>    }<br><br>}<br><br>//MARK : - CBCentralManagerDelegate<br>extension ViewController: CBCentralManagerDelegate {<br>    <br>    func centralManagerDidUpdateState(_ central: CBCentralManager) {<br>        <br>        switch central.state {<br>            <br>        //é›»æºONã‚’å¾…ã£ã¦ã€ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹<br>        case CBManagerState.poweredOn:<br>            let services: [CBUUID] = [serviceUUID]<br>            centralManager?.scanForPeripherals(withServices: services,<br>                                               options: nil)<br>        default:<br>            break<br>        }<br>    }<br>    <br>    /// ãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«ã‚’ç™ºè¦‹ã™ã‚‹ã¨å‘¼ã°ã‚Œã‚‹<br>    func centralManager(_ central: CBCentralManager,<br>                        didDiscover peripheral: CBPeripheral,<br>                        advertisementData: [String : Any],<br>                        rssi RSSI: NSNumber) {<br>        <br>        self.peripheral = peripheral<br>        centralManager?.stopScan()<br>        <br>        //æ¥ç¶šé–‹å§‹<br>        central.connect(peripheral, options: nil)<br>    }<br>    <br>    /// æ¥ç¶šã•ã‚Œã‚‹ã¨å‘¼ã°ã‚Œã‚‹<br>    func centralManager(_ central: CBCentralManager,<br>                        didConnect peripheral: CBPeripheral) {<br>        <br>        peripheral.delegate = self<br>        peripheral.discoverServices([serviceUUID])<br>    }<br>}<br><br>//MARK : - CBPeripheralDelegate<br>extension ViewController: CBPeripheralDelegate {<br>    <br>    /// ã‚µãƒ¼ãƒ“ã‚¹ç™ºè¦‹æ™‚ã«å‘¼ã°ã‚Œã‚‹<br>    func peripheral(_ peripheral: CBPeripheral,<br>                    didDiscoverServices error: Error?) {<br>        <br>        if error != nil {<br>            print(error.debugDescription)<br>            return<br>        }<br>        <br>        //ã‚­ãƒ£ãƒªã‚¢ã‚¯ã‚¿ãƒªã‚¹ãƒ†ã‚£ã‚¯æ¢ç´¢é–‹å§‹<br>        peripheral.discoverCharacteristics(charcteristicUUIDs,<br>                                           for: (peripheral.services?.first)!)<br>    }<br>    <br>    /// ã‚­ãƒ£ãƒªã‚¢ã‚¯ã‚¿ãƒªã‚¹ãƒ†ã‚£ã‚¯ç™ºè¦‹æ™‚ã«å‘¼ã°ã‚Œã‚‹<br>    func peripheral(_ peripheral: CBPeripheral, didDiscoverCharacteristicsFor service: CBService, error: Error?) {<br>        <br>        if error != nil {<br>            print(error.debugDescription)<br>            return<br>        }<br><br>        for characteristics in service.characteristics! {<br>            if(characteristics.uuid == CBUUID(string: kTXCharacteristicUUID)) {<br>//                peripheral.setNotifyValue(true, for: (service.characteristics?[1])!)<br>                self.kTXCBCharacteristic = characteristics<br>                addMessageToTextView("Found TX characteristics !\n")<br>            } else if(characteristics.uuid == CBUUID(string: kRXCharacteristicUUID)) {<br>                self.kRXCBCharacteristic = characteristics<br>                addMessageToTextView("Found RX characteristics !\n")<br>            }<br>        }<br>        <br>        if(self.kRXCBCharacteristic != nil) {<br>            startReciving()<br>        }<br>    }<br>    <br>    private func startReciving() {<br>        peripheral.setNotifyValue(true, for: kRXCBCharacteristic)<br>        addMessageToTextView("Start monitoring the message from Arduino.\n\n")<br>    }<br><br><br>    func peripheral(_ peripheral: CBPeripheral, didWriteValueFor characteristic: CBCharacteristic, error: Error?) {<br>        print(#function)<br>        if error != nil {<br>            print(error.debugDescription)<br>            return<br>        }<br>    }<br>    <br>    /// ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚ã«å‘¼ã°ã‚Œã‚‹<br>    func peripheral(_ peripheral: CBPeripheral, didUpdateValueFor characteristic: CBCharacteristic, error: Error?) {<br>        <br>        if error != nil {<br>            print(error.debugDescription)<br>            return<br>        }<br>        updateWithData(data: characteristic.value!)<br>    }<br>    <br>    private func updateWithData(data : Data) {<br>        if let dataString = String(data: data, encoding: String.Encoding.utf8) {<br>            addMessageToTextView(dataString)<br>        }<br>    }<br>    <br>    private func addMessageToTextView(_ message:String) {<br>        reciveTextView.text = reciveTextView.text + message<br>        scrollToBottom(reciveTextView)<br>    }<br>    <br>    private func scrollToBottom(_ textView:UITextView) {<br>        textView.selectedRange = NSRange(location: textView.text.count, length: 0)<br>        textView.isScrollEnabled = true<br>        <br>        let scrollY = textView.contentSize.height - textView.bounds.height<br>        let scrollPoint = CGPoint(x: 0, y: scrollY > 0 ? scrollY : 0)<br>        textView.setContentOffset(scrollPoint, animated: true)<br>    }<br>}<br></pre><br><br>Arduinoå´ã®ã‚¹ã‚±ãƒƒãƒã¯ã“ã†ãªã£ãŸã€‚<br><br><pre><br>#include <string.h><br>#include <Arduino.h><br>#include <SPI.h><br>#include "Adafruit_BLE.h"<br>#include "Adafruit_BluefruitLE_SPI.h"<br>#include "Adafruit_BluefruitLE_UART.h"<br><br><br>#if SOFTWARE_SERIAL_AVAILABLE<br>  #include <SoftwareSerial.h><br>#endif<br><br>// Arduino UNOã®å ´åˆã“ã®è¨­å®šã§ã†ã¾ãã„ã£ãŸ<br>//<br>#define BLUEFRUIT_SWUART_RXD_PIN       9    // Required for software serial!<br>#define BLUEFRUIT_SWUART_TXD_PIN       10   // Required for software serial!<br>#define BLUEFRUIT_UART_CTS_PIN         11   // Required for software serial!<br>#define BLUEFRUIT_UART_RTS_PIN         -1    // Optional, set to -1 if unused<br>#define BLUEFRUIT_UART_MODE_PIN        -1    // Set to -1 if unused<br>#define VERBOSE_MODE                   false  // If set to 'true' enables debug output<br><br>SoftwareSerial bluefruitSS = SoftwareSerial(BLUEFRUIT_SWUART_TXD_PIN, BLUEFRUIT_SWUART_RXD_PIN);<br><br>Adafruit_BluefruitLE_UART ble(bluefruitSS, BLUEFRUIT_UART_MODE_PIN,<br>                      BLUEFRUIT_UART_CTS_PIN, BLUEFRUIT_UART_RTS_PIN);<br><br><br><br>void error(const __FlashStringHelper*err) {<br>  Serial.println(err);<br>  while (1);<br>}<br><br><br><br>void setup(void)<br>{<br>  while (!Serial); // required for Flora & Micro<br>  delay(500);<br><br><br>  Serial.begin(9600);<br><br>  if ( !ble.begin(VERBOSE_MODE) )<br>  {<br>    error(F("Couldn't find Bluefruit, make sure it's in CoMmanD mode & check wiring?"));<br>  }<br>  Serial.println( F("OK!") );<br>}<br><br><br>void loop(void)<br>{<br><br>  int n = 0;<br>  int maxMessageLength = 50;<br>  char recivedMessage[maxMessageLength];<br><br>   while ( ble.available() ) {    <br>    int c = ble.read();<br>    // èµ·å‹•æ™‚ã«255(0xFF)ã®å‡ºåŠ›ã‚’ã‚¹ãƒ«ãƒ¼<br>    if(c != 0xFF) {<br>      if(maxMessageLength > (n - 1)) {<br>        recivedMessage[n] = (char)c;<br>        n++;<br>      }<br>    }<br>  }<br><br>  if(n > 0) {<br>    recivedMessage[n] = '\0';<br>    ble.write("Arduino got your message is...\n");<br>    ble.write(recivedMessage);<br>    ble.write("\n");<br>  }<br><br>  <br>}<br></pre><br><br>è¦‹äº‹ã€å¯¾è©±ã«æˆåŠŸã—ãŸï¼<br><br><iframe width="560" height="315" frameborder="0" allowfullscreen="" src="//www.youtube.com/embed/bH0tcbTb9Pw"></iframe><br><a href="https://youtube.com/watch?v=bH0tcbTb9Pw">Successfully talked with iOS and Arduino on a Bluetooth connection!</a><br><br><br>[å‚è€ƒ]<br>Swiftã®Bluetoothå‡¦ç†ã®å¤§éƒ¨åˆ†ã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚<br><a href="https://qiita.com/eKushida/items/def628e0eff6c106d467">https://qiita.com/eKushida/items/def628e0eff6c106d467</a><br><br>UUIDã¯bluefruitã®ã‚µã‚¤ãƒˆã«è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚<br><a href="https://learn.adafruit.com/getting-started-with-the-nrf8001-bluefruit-le-breakout/adding-app-support">https://learn.adafruit.com/getting-started-with-the-nrf8001-bluefruit-le-breakout/adding-app-support</a><br><br>Bluetoothç”¨èªã«æˆ¸æƒ‘ã£ã¦ã„ãŸãŒã€ã“ã¡ã‚‰ã‚’èª­ã‚ã°ã–ã£ãã‚Šã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã¤ãã€‚<br><a href="http://jellyware.jp/kurage/bluejelly/ble_guide.html">http://jellyware.jp/kurage/bluejelly/ble_guide.html</a><br><br><br><h2 id="4">ESP-WROOM-02ã§WiFié€šä¿¡ã™ã‚‹ã¾ã§ã€ãã®1 (2018-11-23)</h2>Arduinoã®æƒ…å ±ã‚’æ¼ã£ã¦ã¿ã‚‹ã¨ã€æ•°å¹´å‰ã«ESP-WROOM-02ã¨ã„ã†ç”»æœŸçš„ãªWifiãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‡ºã¦ã„ãŸäº‹ã‚’çŸ¥ã£ãŸã€‚<br><br>æ—©é€Ÿã€ç§‹æœˆé›»å­ã§è²·ã£ã¦ããŸã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181123/20181123115241.jpg" width="300" /><br><br>1280å††ã¨ã„ã†å®‰ã•ã‚‚ãã†ã ãŒã€Arduino UNOãªã©ã‚’ã‚ã–ã‚ã–è²·ã‚ãªãã¦ã‚‚ã€Arduino IDEã§é–‹ç™ºã§ãã¦ã—ã¾ã†äº‹ã ã€‚<br>ã¡ã‚‡ã£ã¨ã—ãŸã‚»ãƒ³ã‚µã‚’ã¤ã‘ã¦ã€IoTåŒ–ãªã‚“ã¦ã“ã¨ãŒã§ãã¦ã—ã¾ã†ã®ã ã‚ã†ã€‚<br><br>é–‹ç™ºç’°å¢ƒã¯MacBookPro(macOS Mojave 10.14)ã§ãŠã“ãªã£ã¦ã„ãã€‚<br><br>ç§‹æœˆã®ESP-WROOM-02é–‹ç™ºã‚­ãƒƒãƒˆãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€‚æ‰‹é †é€šã‚Šé€²ã‚ã¦ã„ãã€‚<br><a href="http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf">http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf</a><br><br><br><br><h3>å‹•ä½œç¢ºèª</h3>1. USBã§ç›´æ¥ã¤ãªãã¨èµ¤ãLEDãƒ©ãƒ³ãƒ—ãŒã¤ãã€‚<br>2. Arduino IDEã‚’ç«‹ã¡ä¸Šã’ã€æ–°è¦ã‚¹ã‚±ãƒƒãƒã‚’é–‹ã„ã¦ãŠãã€‚<br>3. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ„ãƒ¼ãƒ«->ã‚·ãƒªã‚¢ãƒ«ãƒãƒ¼ãƒˆã®ä¸€è¦§ã‹ã‚‰ã€ãã‚Œã‚‰ã—ãã‚‚ã®ã‚’è¦‹ã¤ã‘é¸æŠã€‚<br>4. ãã®å¾Œã€ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã€æ”¹è¡Œã‚’ã€ŒCRãŠã‚ˆã³LFã€ã«ã—ã€é€šä¿¡é€Ÿåº¦ã‚’ã€Œ115200bpsã€ã‚’é¸æŠã™ã‚‹ã€‚<br>5. ESP-WROOM-02ã®RSTã‚¹ã‚¤ãƒƒãƒã‚’æŠ¼ã™ã¨ã€æ–‡å­—åŒ–ã‘ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦ãã‚‹ãŒã€æœ€å¾Œã«Readyã¨å¸°ã£ã¦æ¥ã‚Œã°ãŠkã€‚<br>6. ä»Šåº¦ã¯ã‚·ãƒªã‚¢ãƒ«ã‹ã‚‰ã€ŒATã€ã¨å…¥åŠ›ã—ã¦ã€OKã¨è¿”ã£ã¦ãã‚Œã°ãŠkã ã€‚<br><br><br><h3>Arduinoã‚¹ã‚±ãƒƒãƒã‚’æ›¸ãè¾¼ã‚“ã§ã¿ã‚‹</h3>åŠç”°ä»˜ã‘ã‚’ã•ã•ã£ã¨çµ‚ã‚ã‚‰ã›ã€Lãƒã‚«ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181123/20181123114008.jpg" class="default" /><br><br>IEDã®è¨­å®šã¯ã€ç§‹æœˆã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«é€šã‚Šé€²ã‚ã¦ã„ãã€‚<br><a href="http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf">http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf</a><br><br>ä½•åº¦ã‹ã‚¨ãƒ©ãƒ¼ã®ä½“é¨“ã‚’ã—ãŸãŒã€ã“ã®è¨­å®šã§ã†ã¾ãæ›¸ãè¾¼ã‚ãŸã€‚<br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181123/20181123114327.jpg" width="300" /><br><br>æ›¸ãè¾¼ã¿ã‚’ã™ã‚‹ã¨ãã¯ã€æ¯å›æ¬¡ã®æ‰‹é †ã‚’å¿˜ã‚Œãªã„ã“ã¨ã€‚<br><b>RSTã¨PGMã‚’åŒæ™‚ã«æŠ¼ã—ã¦ã€RSTã‹ã‚‰PGMã®é †ç•ªã«é›¢ã—ã¦ã„ãã€‚</b><br><br><h3>æˆåŠŸï¼</h3>ã¨ã‚Šã‚ãˆãšã€é’è‰²ãƒ€ã‚¤ã‚ªãƒ¼ãƒ‰ã®Lãƒã‚«ã«æˆåŠŸã—ãŸã€‚<br><a href="https://youtu.be/sinwrMGVUTw">https://youtu.be/sinwrMGVUTw</a><br><br>æ¬¡å›ã¯ã„ã‚ˆã„ã‚ˆWifiçµŒç”±ã§é€šä¿¡ã—ã¦ã¿ã‚ˆã†ã€‚<br><br>è¿½è¨˜:<br>ã¡ãªã¿ã«ESP-WROOM-02ã§Lãƒã‚«ã•ã›ã‚‹ã®ã«70mAå¿…è¦ã®ã‚ˆã†ã ã€‚<br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181123/20181123130729.jpg" class="default" /><br><br><br><h2 id="5">ESP-WROOM-02ã§WiFié€šä¿¡ã™ã‚‹ã¾ã§ã€ãã®2 (2018-11-24)</h2>ç§‹æœˆé›»å­ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«é€šã‚Šã€ESP-WROOM-02ã‚’ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«ã—ã¦WiFiã§ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«æ¥ç¶šã—ã¦ã¿ã‚‹ã€‚<br><a href="http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf">http://akizukidenshi.com/download/ds/akizuki/AE-ESP-WROOM02-DEV.pdf</a><br><br>ã‚¹ã‚±ãƒƒãƒä¾‹ã®ã€ESP8266WiFi -> WiFiAccessPointã‚’é–‹ãã€‚<br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124114435.jpg" class="default" /><br><br>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã¡ã‚‡ã£ã¨ã ã‘ç·¨é›†ã™ã‚‹ã€‚<br><br><pre><br>#include <ESP8266WiFi.h><br>#include <WiFiClient.h><br>#include <ESP8266WebServer.h><br><br>/* Set these to your desired credentials. */<br>const char *ssid = "MyFi";<br>const char *password = "88888888"; // 8æ–‡å­—ä»¥ä¸Šã§ãªã„ã¨ã„ã‘ãªã„ï¼Ÿ<br><br>ESP8266WebServer server(80);<br><br>/* Just a little test message.  Go to http://192.168.4.1 in a web browser<br>   connected to this access point to see it.<br>*/<br>void handleRoot() {<br>  server.send(200, "text/html", "&lt;h1&gt;Hello world!&lt;/h1&gt;");<br>}<br><br>void setup() {<br>  delay(1000);<br>  Serial.begin(115200);<br>  Serial.println();<br>  Serial.print("Configuring access point...");<br>  /* You can remove the password parameter if you want the AP to be open. */<br>  WiFi.softAP(ssid, password);<br><br>  IPAddress myIP = WiFi.softAPIP();<br>  Serial.print("AP IP address: ");<br>  Serial.println(myIP);<br>  server.on("/", handleRoot);<br>  server.begin();<br>  Serial.println("HTTP server started");<br>}<br><br>void loop() {<br>  server.handleClient();<br>}<br></pre><br><br>ã‚¹ã‚±ãƒƒãƒã‚’ESP-WROOM-02ã«æ›¸ãè¾¼ã‚€ã€‚<br>è‡ªåˆ†ã§è¨­å®šã—ãŸSSIDãŒWiFiæ¥ç¶šã«ã‚ã‚‰ã‚ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚’é¸æŠã—ã¦ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã€‚<br>ã¡ãªã¿ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ãªã„ã¨æ©Ÿèƒ½ã—ã¦ãã‚Œãªã„ã‚ˆã†ã ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124114429.jpg" class="default" /><br><br>ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã‚’é–‹ã„ã¦RSTãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ã°ã€ESP-WROOM-02ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ•™ãˆã¦ãã‚Œã‚‹ã€‚<br>ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰  http://192.168.4.1/ ã¸ã‚¢ã‚¯ã‚»ã‚¹ã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124114432.jpg" class="default" /><br><br>ã¿ã”ã¨WiFié€šä¿¡ã«æˆåŠŸã—ãŸï¼<br><br><br><h2 id="6">ã‚„ã£ã±ã‚ŠBluetoothé€šä¿¡ã«ã‚‚ã©ã™ã€ãã®1 (2018-11-24)</h2>ESP-WROOM-02ã«æµ®æ°—ã—ã¦ã—ã¾ã£ãŸãŒã€ç§‹è‘‰ã¾ã§æ­©ã„ã¦ã„ã‚‹ã†ã¡ã«å°‘ã—å†·é™ã«ãªã£ãŸã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124222221.jpg" width="300" /><br><br>ç´ ç›´ã«Arduino UNOã‚’ä½¿ã£ãŸæ–¹ãŒãƒ‡ãƒãƒƒã‚®ãƒ³ã‚°ã—ã‚„ã™ã„ã®ã§ã¯ï¼Ÿ<br>ã‚»ãƒ³ã‚µã§éŠã‚“ã ã‚Šã€ç‰¹æ€§ã‚’èª¿ã¹ãŸã‚Šã€æ‰‹æ®µãŒç›®çš„åŒ–ã—ã¦ã—ã¾ã†äººã«ã¯Arduino UNOãŒè‰¯ã„ã‚“ã§ã¯ãªã„ã ã‚ã†ã‹ã¨ã€‚<br>å€‹äººã§ä½¿ã†ã«ã¯ã€Arduino Unoã§Bluetoothé€šä¿¡ãŒã‚¹ãƒãƒ¼ãƒˆã§ã¯ãªã„ã®ã‹ã¨ã€‚<br><br>äºŒæ—¥é–“ã•ã‚ã£ã¦ã¿ã¦ã€ESP-WROOM-02ã®ä¸æº€ãŒã‚ã‚‹ã€‚<br><br>1. ADã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ãŒè²§å¼±ã€1ç«¯å­ã§1Vã®ç¯„å›²ã€ä½¿ã„ã¥ã‚‰ã„ã€‚<br>2. æ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚Šã‚„ã™ã„ã€‚ï¼ˆæ›¸ãè¾¼ã¿ãƒªã‚»ãƒƒãƒˆã‚¹ã‚¤ãƒƒãƒã‚’æŠ¼ã—å¿˜ã‚Œã‚‹ã‹ã‚‰)<br>3. ãã‚‚ãã‚‚WiFiçµŒç”±ã§ãƒ­ã‚°ã¨ã‚‹å¿…è¦ã‚ã‚‹ã®ï¼Ÿ<br>4. é›»åŠ›æ¶ˆè²»ãŒæ°—ã«ãªã‚‹ã€‚<br>5. é›»æºä¾›çµ¦ã‚’è‡ªå‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚<br><br>1ã®<b>ã€ŒADã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ãŒè²§å¼±ã€1ç«¯å­ã§1Vã®ç¯„å›²ã€ä½¿ã„ã¥ã‚‰ã„ã€‚ã€</b>ã®ä»¶ã€Arduino UNOã¯5Vã€1024bitåˆ†è§£èƒ½ã®ADã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ãŒ5ã‚‚ã¤ã„ã¦ã„ã‚‹ã€‚<br>1024bitã¯ãŠéŠã³ã«ã¯ååˆ†ã€æœ¬æ°—ã‚’å‡ºã™ãªã‚‰è‡ªå‰ã§ADã‚³ãƒ³ãƒãƒ¼ã‚¿ãƒ¼ã‚’ç”¨æ„ã™ã‚Œã°è‰¯ã„ã€‚<br><br>2ã®<b>ã€Œæ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã‚Šã‚„ã™ã„ã€‚ã€</b>ã®ä»¶ã€ã“ã‚Œã¯ã€Arduino UNOã¯ã‚ˆãã§ãã¦ã„ã¦ã€ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³æŠ¼ã•ãšã¨ã‚‚ã‚¹ã‚±ãƒƒãƒæ›¸ãè¾¼ã¿ãŒã§ãã‚‹ã€‚<br>PCã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«æ…£ã‚Œã£ã“ã®ä¸–ä»£ã«ã¯ã¨ã¦ã‚‚å¤§åˆ‡ãªå¿ƒé£ã„ã§ã¯ãªã„ã ã‚ã†ã‹ï¼Ÿ<br><br>3ã®<b>ã€Œãã‚‚ãã‚‚WiFiçµŒç”±ã§ãƒ­ã‚°ã¨ã‚‹å¿…è¦ã‚ã‚‹ã®ï¼Ÿã€</b>ã®ä»¶ã€ã€Œãã‚Œã‚’è¨€ã£ã¡ã‚ƒã‚ã€ãŠçµ‚ã„ã‚ˆã€ã§ã‚‚ã§ã‚‚ã€IoTã«ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯ã€å·¨å¤§è³‡æœ¬ã®ãƒ¡ãƒªãƒƒãƒˆã§ã—ã‹ãªã„ã®ã§ã¯ï¼Ÿ<br>IoTå®¶é›»åŒ–ã™ã‚‹ã¨ã€ç‰©ãƒ¬ãƒ™ãƒ«ã§äººã€…ã®è¡Œå‹•ãƒ­ã‚°ã‚’å–ã‚Œã¦Analytiscã§ãã‚‹ã‚ã‘ã€‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ã‚‰ã€IoTå®¶é›»ã‚’ãƒãƒ©ã¾ã„ãŸæ–¹ãŒã‚ˆã‚Šã‚³ã‚¹ãƒ‘é«˜ã„è£½å“ãŒä½œã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚<br><br>4ã®<b>ã€Œé›»åŠ›æ¶ˆè²»ãŒæ°—ã«ãªã‚‹ã€‚ã€</b>ã®ä»¶ã€æ„Ÿè¦šçš„ã«BLEã‚ˆã‚Šã¯WiFiã®æ¶ˆè²»é›»åŠ›ã®æ–¹ãŒå¤§ããã†ã€‚<br><br>5ã®<b>ã€Œé›»æºä¾›çµ¦ã‚’è‡ªå‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ã€</b>ã®ä»¶ã€ESP-WROOM-02ã§ã¡ã‚‡ã“ã£ã¨ãƒ†ã‚¹ãƒˆã—ãŸã„ã¨ãã¯ã€é›»æºä¾›çµ¦ãŒè²§å¼±ãªã®ã§åˆ¥é€”è‡ªå‰ã§é›»æºå›è·¯ã‚’çµ„ã‚“ã ã‚Šã€ã„ã¡ã„ã¡é›»æºã®ã“ã¨ã¾ã§è€ƒãˆãŸã‚Šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ç›®çš„ãŒã¯ã£ãã‚Šã—ã¦ã„ã¦ã€å›è·¯ãŒã§ãä¸ŠãŒã£ã¦ã„ã‚‹ãªã‚‰ã°ã‚ˆã„ãŒã€‚æ¯”ã¹ã¦Arduino UNOã¯5Vã€3.3Vã®é›»æºãŒç°¡å˜ã«å–ã‚Œã‚‹ã®ã§ã‚»ãƒ³ã‚µãƒ¼å›è·¯è¨­è¨ˆã«é›†ä¸­ã—ã‚„ã™ã„ã€‚<br><br>ãã‚“ãªã“ã‚“ãªæ€ã£ã¦ã€Arduino UNOã‚’ã‚‚ã†ä¸€åº¦è¦‹ç›´ã—ã¦ã¿ãŸã€‚ã¾ãšã¯ãƒ‡ãƒãƒƒã‚°ç’°å¢ƒæ•´ãˆã‚‹ã¹ãã‹ãªã¨ã€‚<br>ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ã‚’å æœ‰ã—ã¦ã„ã‚‹Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ã©ã“ã‹ã«ç´ã‚ãŸã„ã€‚<br>ã—ã‹ã—ã€ã“ã‚Œã ã‘ã®ãŸã‚ã«ã‚·ãƒ¼ãƒ«ãƒ‰ã¯å¤§ã’ã•ã™ãã‚‹ã ã‚ã†ã€‚<br>ã¡ã‚‡ã†ã©ãƒ­ã‚´ã®æ‰€ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒã‚ã£ãŸã®ã§ã€Bluetoothãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã¿ãŸã€‚<br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124222116.jpg" width="300" /><br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124222119.jpg" class="default" /><br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124222122.jpg" width="300" /><br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181124/20181124222126.jpg" width="300" /><br>é›»æºã¯3ç«¯å­ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸ç›´æ¥æ¥ç¶šã€‚<br>ã“ã‚Œã§å·¦å´ã®ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰ãŒã‚¹ãƒƒã‚­ãƒªã—ãŸã€‚<br><br><br><h2 id="7">æ¸©åº¦ã‚»ãƒ³ã‚µãƒ¼DHT11ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹ (2018-11-24)</h2><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181125/20181125222716.jpg" class="default" /><br><br>æ¹¿åº¦ã¨æ¸©åº¦ãŒæ¸¬ã‚Œã‚‹ãƒ‡ã‚¸ã‚¿ãƒ«ã‚»ãƒ³ã‚µDHT11ã‚’Arduinoã«2ãƒãƒ£ãƒ³ãƒãƒ«ã§æ¥ç¶šã—ã¦ã¿ãŸã€‚<br>å±‹å¤–ã®æ°—æ¸©ã¨ã€å±‹å†…ã®æ°—æ¸©ã‚’æ¸¬å®šã—ã¦ã„ã‚‹ã€‚<br>Bluefruit LE UART Friendã‚’é€šã—ã¦ã€BluetoothçµŒç”±ã§iOSã¨æ¥ç¶šã€‚<br>Arduinoã‹ã‚‰ã®æ¸©åº¦ãƒ‡ãƒ¼ã‚¿ã‚’iOSã‚¢ãƒ—ãƒªã§å—ä¿¡ã—ã¦ã„ã‚‹ç”»åƒã ã€‚<br><br>æ¸©åº¦ã‚»ãƒ³ã‚µã¯å–ã‚Šå¤‰ãˆå¯èƒ½ãªã‚ˆã†ã«ã€3æ¥µã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚±ãƒ¼ãƒ–ãƒ«ã¨ãƒŸãƒ‹ãƒ•ã‚©ãƒ³ãƒ—ãƒ©ã‚°ã§å–ã‚Šä»˜ã‘ã¦ã¿ãŸã€‚<br>5Vé›»æºã€GNDã€DATAã§ã‚ã‚‹ã€‚<br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181125/20181125222719.jpg" width="300" /><br><br>å®Ÿéš›ã“ã“ã¾ã§ã‚„ã£ã¦ã¿ãŸãŒã€Arduinoæ¯ä½“ã‹ã‚‰æœ‰ç·šã§ã‚»ãƒ³ã‚µã‚’é…ç·šã™ã‚‹ã¨ã„ã†ã®ãŒã©ã†ã‚‚æ°—ã«å…¥ã‚‰ãªã„ã€‚<br>ã‚»ãƒ³ã‚µã®ä½ç½®ã¯ã€ãã®æ™‚ã€…ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã€é›°å›²æ°—ã§ä½ç½®ã‚’æ±ºã‚ãŸã„ã‚‚ã®ã§ã‚ã‚‹ã€‚<br>æœ‰ç·šã«ç¸›ã‚‰ã‚ŒãŸããªã„ã®ã§ã‚ã‚‹ã€‚<br>ãã†ãªã‚‹ã¨ã€ã‚„ã£ã±ã‚ŠESP-WROOM-02ã«æˆ»ã‚‹ã®ã‹ãªãã€‚ã€‚ã€‚<br><br><br><h2 id="8">ESP-WROOM-02ã§SSLã§HTTPSãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ã¿ã‚‹ (2018/11/26)</h2>ã‚¹ã‚±ãƒƒãƒä¾‹ã®ã‚µãƒ³ãƒ—ãƒ«ESP8266WiFi -> HTTPSRequestã‚’å…ƒã«HTTPSã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã¿ãŸã€‚<br>3ç§’é–“ã«ä¸€å›ã€SSLçµŒç”±ã§POSTãƒ‡ãƒ¼ã‚¿ã‚’æŠ•ã’ã¦ã„ã‚‹ã€‚<br>å°šã€é€ä¿¡å…ˆã®ã‚µãƒ¼ãƒãƒ¼ã«ã¯ã€Let's encryptã‚’è¨­å®šæ¸ˆã¿ã ã€‚<br><br><pre><br>#include <ESP8266WiFi.h><br>#include <WiFiClientSecure.h><br><br>const char* ssid = "Router SSID";<br>const char* password = "Router Password";<br><br>const char* host = "example.com";<br>const int httpsPort = 443;<br><br>void setup() {<br>  Serial.begin(115200);<br><br>  wifiInitialize();<br><br>}<br><br>void loop() {  <br>  String url = "/somedir/echo.php";<br>  String postData = "message=88888";<br>  httpsPost(url, postData);<br><br>  delay(3000);<br>}<br><br>void wifiInitialize() {<br>  Serial.println();<br>  Serial.print("connecting to ");<br>  Serial.println(ssid);<br>  WiFi.mode(WIFI_STA);<br>  WiFi.begin(ssid, password);<br>  while (WiFi.status() != WL_CONNECTED) {<br>    delay(500);<br>    Serial.print(".");<br>  }<br>  Serial.println("");<br>  Serial.println("WiFi connected");<br>  Serial.println("IP address: ");<br>  Serial.println(WiFi.localIP());<br>}<br><br>void httpsPost(String url, String postData) {<br>  // Use WiFiClientSecure class to create TLS connection<br>  WiFiClientSecure client;<br>  Serial.print("connecting to ");<br>  Serial.println(host);<br>  if (!client.connect(host, httpsPort)) {<br>    Serial.println("connection failed");<br>    return;<br>  }<br><br>  Serial.print("requesting URL: ");<br>  Serial.println(url);<br><br>  client.println("POST " + url + " HTTP/1.1");<br>  client.println("Host: " + (String)host);<br>  client.println("User-Agent: ESP8266/001");<br>  client.println("Connection: close");<br>  client.println("Content-Type: application/x-www-form-urlencoded;");<br>  client.print("Content-Length: ");<br>  client.println(postData.length());<br>  client.println();<br>  client.println(postData);<br><br>  Serial.println("request sent");<br>  while (client.connected()) {<br>    String line = client.readStringUntil('\n');<br>    if (line == "\r") {<br>      Serial.println("headers received");<br>      break;<br>    }<br>  }<br>  String line = client.readStringUntil('\n');<br>  Serial.println("reply was:");<br>  Serial.println("==========");<br>  Serial.println(line);<br>  Serial.println("==========");<br>  Serial.println("closing connection");<br>}<br></pre><br>ã‚µãƒ¼ãƒãƒ¼å´ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã“ã¡ã‚‰ã€ã„ãŸã£ã¦ç°¡å˜ãªå‡¦ç†ã ã€‚<br><br><pre><br><?php<br><br>$message = $_POST["message"];<br>$useragent = $_SERVER['HTTP_USER_AGENT'];<br><br>echo "Your message is \"". $message. ", UserAgent is \"". $useragent. "\"\n";<br><br>?><br></pre><br><br><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/a/araemonz/20181126/20181126132308.jpg" width="300" /><br><br>GETã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æ¸¡ã—ã¦ã—ã¾ã†ã¨ã€SSLã®æ„å‘³ãŒãªã„ã¨æ€ã†ã®ã§POSTã§é€ä¿¡ã—ãŸã€‚<br>ã“ã‚Œã‚’å…ƒã«ã‚»ãƒ³ã‚µã®å€¤ã‚’ã‚µãƒ¼ãƒãƒ¼ã¸æŠ•ã’ã¦ã€ã‚µãƒ¼ãƒãƒ¼å´ã§ã¯Unixtimestampã¨å…±ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ã‚°ã£ã¦è¡Œã“ã†ã¨æ€ã†ã€‚</p>
        <ul class="shareList">
        <li class="shareList__item"><a class="shareList__link icon-twitter" href="https://twitter.com/intent/tweet?url=http://192.168.100.101/blog/arduino-bluetooth.html&text=%F0%9F%92%BBArduino%E3%81%A7%E6%B8%A9%E5%BA%A6%E3%83%AD%E3%82%AC%E3%83%BC%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%BE%E3%81%A7" target="_blank" title="Twitter"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="Facebook"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-google-plus" href="https://plus.google.com/share?url=http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="Google+"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-hatebu" href="http://b.hatena.ne.jp/entry/http://192.168.100.101/blog/arduino-bluetooth.html" target="_blank" title="ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯"></a></li>
        <li class="shareList__item"><a class="shareList__link icon-pocket" href="http://getpocket.com/edit?url=http://192.168.100.101/blog/arduino-bluetooth.html&title=%F0%9F%92%BBArduino%E3%81%A7%E6%B8%A9%E5%BA%A6%E3%83%AD%E3%82%AC%E3%83%BC%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%BE%E3%81%A7" target="_blank" title="Pocket"></a></li>
        </ul>

</article>
</div>
            </div>

<div id="page_top"><a href="#"></a></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
/****************************************
 * TOPã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³è¡¨ç¤º
 ***************************************/
$(function() {
    var pagetop = $('#page_top');
    pagetop.hide();
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {  //100pxã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸã‚‰è¡¨ç¤º
            pagetop.fadeIn();
        } else {
            pagetop.fadeOut();
        }
    });
    pagetop.click(function () {
        $('body,html').animate({
            scrollTop: 0
        }, 300); //0.3ç§’ã‹ã‘ã¦ãƒˆãƒƒãƒ—ã¸ç§»å‹•
        return false;
    });
});

</script>
</body>
</html>