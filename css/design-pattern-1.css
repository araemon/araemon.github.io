---
title:"オブジェクト注入（コンポジション）でTeMaKiのメインプログラムを整理"
date:"2018-12-25"
category:"blog"
---
## デザインパターン
image:/images/temaki-2a.jpg

OSSのTeMaKiプロジェクトで、Md2Htmlオブジェクト内でインスタンスの生成をしていましたが、メインプログラムで全てインスタンスを生成し、それをMd2Htmlのコンストラクタで渡すようにしました。こういった手法のことをコンポジションとかオブジェクト注入と呼ぶそうです。
今までなんとなくモヤモヤしたクラス分けが、はっきりと機能別に分けられるようになりました。また、クラスごとの独立性がまし、クラス同士が疎結合になりました。
以前はMetaDataを、Md2Htmlのインスタンスプロパティとして直接書き込んでいましたが、別オブジェクトに分けることでMetaDataオブジェクトだけを使い回すといったことが容易になりました。

TeMaKi
https://github.com/araemon/temaki

<a target="_blank"  href="https://www.amazon.co.jp/gp/product/4873115655/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4873115655&linkCode=as2&tag=101010fun-22&linkId=f4300224c9f015c2f26b49f9b622a3a4"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4873115655&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=101010fun-22" ></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=101010fun-22&l=am2&o=9&a=4873115655" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />